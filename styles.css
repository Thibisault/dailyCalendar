/* ---------- Thème moderne, doux & relaxant ---------- */
* { box-sizing: border-box; }
:root{
  /* Palette claire (apaisée) */
  --bg-1:#eef2f7;
  --bg-2:#e9eff5;

  --surface: #ffffff;
  --surface-elev: rgba(255,255,255,0.72);
  --border: #e3e9f2;

  --text: #1e2330;
  --muted: #748096;

  --brand: #7e8fc8;        /* bleu gris doux */
  --brand-weak:#e8eefc;    /* pill + tabs */
  --danger:#b97a86;        /* rose désaturé */

  --ring: rgba(126,143,200,.45);

  --radius-lg: 18px;
  --radius-md: 14px;
  --radius-sm: 10px;

  --shadow-sm: 0 2px 10px rgba(17, 24, 39, .06);
  --shadow-md: 0 6px 24px rgba(17, 24, 39, .08);
  --shadow-lg: 0 18px 46px rgba(17, 24, 39, .10);

  --transition-fast: .18s cubic-bezier(.2,.7,.3,1);
  --transition-slow: .35s cubic-bezier(.2,.7,.3,1);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg-1:#0f131a;
    --bg-2:#151b25;

    --surface:#121823;
    --surface-elev: rgba(18,24,35,.7);
    --border:#232e41;

    --text:#e9edf3;
    --muted:#9aabc3;

    --brand:#9ab3ff;
    --brand-weak: rgba(154,179,255,.12);
    --danger:#e3a7b0;

    --ring: rgba(154,179,255,.35);

    --shadow-sm: 0 2px 10px rgba(0,0,0,.35);
    --shadow-md: 0 8px 30px rgba(0,0,0,.45);
    --shadow-lg: 0 18px 56px rgba(0,0,0,.55);
  }
}

/* ---------- Base ---------- */
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 15% 10%, var(--bg-2), transparent 60%),
    radial-gradient(1200px 800px at 85% 0%,  var(--bg-1), transparent 55%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  display:flex; flex-direction:column;
  -webkit-tap-highlight-color: transparent;
}

::selection{ background: var(--brand-weak); color: var(--text); }

/* ---------- Header ---------- */
.app-header{
  position: sticky; top:0; z-index: 20;
  backdrop-filter: blur(12px) saturate(130%);
  -webkit-backdrop-filter: blur(12px) saturate(130%);
  background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
  border-bottom: 1px solid var(--border);
  padding: 14px 16px;
  display:flex; align-items:center; justify-content: space-between; gap: 12px;
}
@media (prefers-color-scheme: dark){
  .app-header{
    background: linear-gradient(180deg, rgba(12,16,24,.6), rgba(12,16,24,.3));
  }
}
h1{ margin:0; font-size: 1.2rem; letter-spacing: .2px; }

/* ---------- Layout ---------- */
main{ width:min(950px, 92vw); margin: 18px auto 26px; flex:1; }
.app-footer{
  text-align:center;
  padding: 14px 16px;
  color: var(--muted);
  border-top: 1px solid var(--border);
}

/* ---------- Tabs ---------- */
.tabs{ display:flex; gap:8px; margin: 6px 0 16px; }
.tab{
  appearance:none; border:none; cursor:pointer;
  padding: 10px 14px;
  border-radius: 999px;
  background: var(--brand-weak);
  color: var(--brand);
  font-weight: 600;
  transition: transform var(--transition-fast), background var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast);
  box-shadow: var(--shadow-sm) inset;
}
.tab.active{
  background: linear-gradient(160deg, var(--brand) 0%, color-mix(in oklab, var(--brand) 70%, #ffffff 30%) 100%);
  color: #fff;
  box-shadow: var(--shadow-md);
}
.tab:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px var(--ring), var(--shadow-md);
}
.view{ display:none; }
.view.active{ display:block; }

/* ---------- Cards / Panels ---------- */
.card{
  background: var(--surface-elev);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  padding: 18px;
  transition: box-shadow var(--transition-slow), transform var(--transition-fast), background var(--transition-slow);
  backdrop-filter: blur(10px) saturate(130%);
  -webkit-backdrop-filter: blur(10px) saturate(130%);
}
.card:hover{ transform: translateY(-1px); box-shadow: var(--shadow-lg); }

.big-number{ font-size: 2.35rem; margin: .2rem 0; letter-spacing:.2px; }
.muted{ color: var(--muted); }

/* ---------- Forms / Inputs ---------- */
.new-task{ display:flex; gap:10px; margin-bottom: 10px; }

input[type="text"], select{
  width: 100%;
  background: var(--surface-elev);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 12px 14px;
  outline: none;
  box-shadow: var(--shadow-sm) inset;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
}
input[type="text"]:focus, select:focus{
  border-color: color-mix(in oklab, var(--brand) 50%, var(--border) 50%);
  box-shadow: 0 0 0 3px var(--ring), var(--shadow-sm) inset;
}

.hint{ color: var(--muted); margin: 6px 2px 14px; }

/* ---------- Buttons ---------- */
.btn{
  appearance:none; border:none; cursor:pointer;
  padding: 11px 16px;
  background: linear-gradient(170deg, var(--brand), color-mix(in oklab, var(--brand) 76%, #ffffff 24%));
  color:#fff;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast);
  will-change: transform;
}
.btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-lg); }
.btn:active{ transform: translateY(0); filter: brightness(.98); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

.btn.secondary{
  background: linear-gradient(170deg, color-mix(in oklab, var(--muted) 40%, #ffffff 60%), color-mix(in oklab, var(--muted) 30%, #ffffff 70%));
  color: var(--text);
}
.btn.danger{
  background: linear-gradient(170deg, var(--danger), color-mix(in oklab, var(--danger) 75%, #ffffff 25%));
  color: #fff;
}

.footer-row{ margin-top: 14px; display:flex; justify-content:flex-end; gap:10px; }

/* ---------- Tasks List ---------- */
.task-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }

.task-item{
  display:flex; align-items:center; gap:12px;
  background: var(--surface-elev);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 12px 14px;
  box-shadow: var(--shadow-sm);
  transition: background var(--transition-slow), box-shadow var(--transition-fast), transform var(--transition-fast);
  backdrop-filter: blur(8px) saturate(130%);
  -webkit-backdrop-filter: blur(8px) saturate(130%);
}
.task-item:hover{ box-shadow: var(--shadow-md); transform: translateY(-1px); }
.task-item.dragging{ opacity:.7; transform: scale(.995); }

.task-grip{
  cursor: grab; user-select:none; font-size: 18px; color: var(--muted);
  padding: 4px 6px; border-radius: var(--radius-sm);
  transition: background var(--transition-fast), color var(--transition-fast);
}
.task-grip:active{ cursor: grabbing; }
.task-item:hover .task-grip{ background: color-mix(in oklab, var(--brand-weak) 70%, transparent 30%); color: var(--brand); }

.task-title{
  flex:1;
  border:none; outline:none;
  background: transparent;
  color: var(--text);
  padding: 8px 10px;
  border-radius: var(--radius-sm);
  transition: background var(--transition-fast), box-shadow var(--transition-fast);
}
.task-title:focus{
  background: color-mix(in oklab, var(--brand-weak) 80%, transparent 20%);
  box-shadow: 0 0 0 3px var(--ring);
}

.task-actions{ display:flex; gap:6px; }
.icon-btn{
  appearance:none; border:none; background:transparent; color: var(--muted);
  cursor:pointer; padding:6px; border-radius: 12px;
  transition: background var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
}
.icon-btn:hover{ background: color-mix(in oklab, var(--brand-weak) 70%, transparent 30%); color: var(--brand); transform: translateY(-1px); }
.icon-btn:active{ transform: translateY(0); }

/* Checkboxes (natifs) */
input[type="checkbox"]{
  width: 18px; height: 18px;
  accent-color: var(--brand);
  cursor: pointer;
}

/* ---------- Stats ---------- */
.filters{ display:flex; gap:10px; align-items:center; margin-bottom: 12px; }
.per-task-row{
  display:flex; align-items:center; justify-content:space-between;
  padding: 10px 0;
  border-bottom: 1px dashed var(--border);
}
.badge{
  display:inline-flex; align-items:center; justify-content:center;
  min-width: 56px;
  padding: 6px 10px;
  border-radius: 999px;
  background: var(--brand-weak);
  color: var(--brand);
  font-weight: 700;
  letter-spacing: .2px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}
.empty{ color: var(--muted); font-style: italic; }

/* ---------- Hints / Toast ---------- */
.toast{
  position: fixed; left:50%; bottom: 22px; transform: translateX(-50%) translateY(16px);
  background: color-mix(in oklab, #0b0f18 85%, var(--brand) 15%);
  color: #fff;
  padding: 10px 14px;
  border-radius: 14px;
  box-shadow: var(--shadow-md);
  opacity: 0;
  transition: transform var(--transition-fast), opacity var(--transition-fast);
  z-index: 1000;
}
.toast.show{ opacity: 1; transform: translateX(-50%) translateY(0); }

/* ---------- Accessibility & Motion ---------- */
:focus-visible{
  outline: none !important;
  box-shadow: 0 0 0 3px var(--ring) !important;
  border-radius: 12px;
}

@media (prefers-reduced-motion: reduce){
  * { transition: none !important; animation: none !important; }
}

/* ---------- Utilities ---------- */
.hide{ display:none !important; }
